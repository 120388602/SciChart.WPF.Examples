<UserControl x:Class="SciChart.Examples.Examples.HeatmapChartTypes.RealTimeHeatmap.HeatMapExampleView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:s="http://schemas.abtsoftware.co.uk/scichart"
             Loaded="OnExampleLoaded"
             Unloaded="OnExampleUnloaded"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:ext="http://schemas.abtsoftware.co.uk/scichart/exampleExternals"
             xmlns:system="clr-namespace:System;assembly=mscorlib"
             d:DesignHeight="400"
             d:DesignWidth="600"
             mc:Ignorable="d">
    
    <UserControl.Resources>
        
        <s:GradientStopsToLinearGradientBrushConverter x:Key="ColorsToLinearGradientBrushConverter"/>

        <ObjectDataProvider
            x:Key="PaletteModesProvider"
            MethodName="GetValues"
            ObjectType="{x:Type system:Enum}">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="s:ColorPaletteMode" />
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>

        <Style x:Key="MajorContourLineStyle" TargetType="s:ContourLine">
            <Setter Property="StrokeDashArray" Value="2,4" />
            <Setter Property="StrokeThickness" Value="3" />
            <Setter Property="Stroke" Value="Red" />
        </Style>

        <Style x:Key="MinorContourLineStyle" TargetType="s:ContourLine">
            <Setter Property="StrokeThickness" Value="1" />
            <Setter Property="Stroke" Value="GreenYellow" />
        </Style>

        <s:HeatmapColorPalette x:Key="ColorPalette" Maximum="200">
            <s:HeatmapColorPalette.GradientStops>
                <GradientStop Offset="0" Color="DarkBlue" />
                <GradientStop Offset="0.2" Color="CornflowerBlue" />
                <GradientStop Offset="0.4" Color="DarkGreen" />
                <GradientStop Offset="0.6" Color="Chartreuse" />
                <GradientStop Offset="0.8" Color="Yellow" />
                <GradientStop Offset="1" Color="Red" />
            </s:HeatmapColorPalette.GradientStops>
        </s:HeatmapColorPalette>
        
        <Style TargetType="TextBox">
            <Setter Property="MinWidth" Value="50"/>
            <Setter Property="Height" Value="16"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>

        <Style TargetType="Label">
            <Setter Property="Foreground" Value="White"/>
        </Style>

    </UserControl.Resources>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- The SciChartInteractionToolbar adds zoom, pan, zoom extents and rotate functionality -->
        <!-- to the chart and is included for example purposes. -->
        <!-- If you wish to know how to zoom and pan a chart then do a search for Zoom Pan in the Examples suite! -->
        <ext:SciChartInteractionToolbar TargetSurface="{Binding ElementName=sciChart}">
            <ext:FlyoutMenuButton x:Name="ContourOptions"
                                  HorizontalAlignment="Left"
                                  FontSize="10"
                                  Content="CN"
                                  ToolTipService.ToolTip="Contour">

                <ext:FlyoutMenuButton.PopupContent>
                    <StackPanel MinWidth="150" MinHeight="300" Orientation="Vertical">

                        <ToggleButton x:Name="AddContour" Margin="3" HorizontalAlignment="Left" MinWidth="66" Content="Contour" Style="{StaticResource DefaultToggleButtonStyle}" 
                                      ToolTipService.ToolTip="Add Heatmap Contour" Checked="EnableContours" Unchecked="DisableContours" />
                        <CheckBox x:Name="ApplyPaletteCkb" Click="OnApplyPalette" Content="Apply Palette" Margin="0,2"/>
                        <ComboBox x:Name="ContourPaletteMode" MinWidth="10" ItemsSource="{Binding Source={StaticResource PaletteModesProvider}}" SelectedIndex="1" Margin="0,2"/>
                        <CheckBox x:Name="ApplyMajorStyleCkb" Click="OnApplyMajorStyle" Content="Apply Major Style" Margin="0,2"/>
                        <CheckBox x:Name="ApplyMinorStyleCkb" Click="OnApplyMinorStyle" Content="Apply Minor Style" Margin="0,2"/>

                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="2"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="2"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="2"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Label Content="ZMin" />
                            <TextBox x:Name="ZMin_tb" Grid.Column="1" KeyUp="OnZMinKeyUp"/>

                            <Label Grid.Row="2" Content="ZMax" Foreground="White"/>
                            <TextBox x:Name="ZMax_tb" Grid.Row="2" Grid.Column="1" KeyUp="OnZMaxKeyUp" />

                            <Label Grid.Row="4" Content="ZStep"/>
                            <TextBox x:Name="ZStep_tb" Grid.Row="4" Grid.Column="1" KeyUp="OnZStepKeyUp" />

                            <Label Grid.Row="6" Content="Minors Per Major"/>
                            <TextBox x:Name="MinorsPerMajor_tb" Grid.Row="6" Grid.Column="1" KeyUp="OnMinorsPerMajorChanged" />
                        </Grid>
                    </StackPanel>
                </ext:FlyoutMenuButton.PopupContent>
            </ext:FlyoutMenuButton>

            <ToggleButton x:Name="StartButton" Click="StartButton_Click" IsChecked="True" Style="{StaticResource PlayButtonStyle}" Padding="4"/>
            <ToggleButton x:Name="StopButton" Click="StopButton_Click" Style="{StaticResource StopButtonStyle}" Padding="7"/>

        </ext:SciChartInteractionToolbar>

        <s:SciChartSurface x:Name="sciChart" Grid.Column="1" Padding="0"
                           BorderThickness="0">

            <s:SciChartSurface.RenderableSeries>
                <s:FastUniformHeatmapRenderableSeries x:Name="heatmapSeries" Opacity="0.9">
                    <s:FastUniformHeatmapRenderableSeries.ColorMap>
                        <s:HeatmapColorPalette Maximum="200">
                            <s:HeatmapColorPalette.GradientStops>
                                <GradientStop Offset="0" Color="DarkBlue" />
                                <GradientStop Offset="0.2" Color="CornflowerBlue" />
                                <GradientStop Offset="0.4" Color="DarkGreen" />
                                <GradientStop Offset="0.6" Color="Chartreuse" />
                                <GradientStop Offset="0.8" Color="Yellow" />
                                <GradientStop Offset="1" Color="Red" />
                            </s:HeatmapColorPalette.GradientStops>
                        </s:HeatmapColorPalette>
                    </s:FastUniformHeatmapRenderableSeries.ColorMap>
                </s:FastUniformHeatmapRenderableSeries>
                <s:FastUniformContourRenderableSeries x:Name="contourSeries" ColorMapMode="{Binding SelectedValue, ElementName=ContourPaletteMode}" IsVisible="false"/>
            </s:SciChartSurface.RenderableSeries>

            <s:SciChartSurface.XAxis>
                <s:NumericAxis DrawMajorBands="True" />
            </s:SciChartSurface.XAxis>

            <s:SciChartSurface.YAxis>
                <s:NumericAxis DrawMajorBands="True" />
            </s:SciChartSurface.YAxis>

            <s:SciChartSurface.ChartModifier>
                <s:ModifierGroup>
                    <s:RolloverModifier ShowTooltipOn="Always"  UseInterpolation="True" ReceiveHandledEvents="True"/>
                    <s:RubberBandXyZoomModifier ExecuteOn="MouseLeftButton" />
                    <s:ZoomExtentsModifier ExecuteOn="MouseDoubleClick" />
                </s:ModifierGroup>
            </s:SciChartSurface.ChartModifier>

        </s:SciChartSurface>

        <s:HeatmapColorMap Margin="10,10,60,40" 
                          Grid.Column="1"
                          HorizontalAlignment="Right"
                          VerticalAlignment="Stretch"
                          Background="{Binding ElementName=sciChart, Path=Background}"
                          Foreground="{Binding ElementName=sciChart, Path=Foreground}"
                          ColorMap="{Binding ElementName=heatmapSeries, Path=ColorMap.GradientStops, Converter={StaticResource ColorsToLinearGradientBrushConverter}}"
                          Minimum="{Binding ElementName=heatmapSeries, Path=ColorMap.Minimum, Mode=TwoWay}"
                          Maximum="{Binding ElementName=heatmapSeries, Path=ColorMap.Maximum, Mode=TwoWay}"
                          TextFormatting="0.00"
                          Opacity="0.8"
                          BorderBrush="#777"
                          BorderThickness="1"
                          Orientation="Vertical" />
    </Grid>
</UserControl>



